(this.webpackJsonpchirper=this.webpackJsonpchirper||[]).push([[0],{49:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n(0),r=n(21),s=n.n(r),o=n(5),c=n(12),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return{SET_AUTHED_USER:t.id}[t.type]||e},u=n(10),d=n.n(u),p=n(11),h=n(30),m=n(3),b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.authedUser,a=t.hasLiked,i=t.id,r=t.tweet,s=t.tweets,o=t.type,c=e[i]?e[i].likes:[],l=r?r.id:"",u={};return l&&r.replyingTo&&(u=Object(p.a)({},r.replyingTo,Object(m.a)(Object(m.a)({},e[r.replyingTo]),{},{replies:[].concat(Object(h.a)(e[r.replyingTo].replies),[l])}))),{ADD_TWEET:Object(m.a)(Object(m.a)({},e),{},Object(p.a)({},l,r),u),RECEIVE_TWEETS:Object(m.a)(Object(m.a)({},e),s),TOGGLE_TWEET:Object(m.a)(Object(m.a)({},e),{},Object(p.a)({},i,Object(m.a)(Object(m.a)({},e[i]),{},{likes:a?c.filter((function(e){return e!==n})):[].concat(Object(h.a)(c),[n])})))}[o]||e},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{RECEIVE_USERS:Object(m.a)(Object(m.a)({},e),t.users)}[t.type]||e},g=Object(c.c)({authedUser:l,loadingBar:u.loadingBarReducer,tweets:b,users:j}),f=n(34),v=function(e){return function(t){return function(n){console.group(n.type),console.log("The action: ",n);var a=t(n);return console.log("The new state: ",e.getState()),console.groupEnd(),a}}},x=Object(c.a)(f.a,v),y=Object(c.d)(g,x),k=(n(49),n(15)),O=n(17),w=n(16),T=n(13),z=n(4),q=n(36),_={sarah_edo:{id:"sarah_edo",name:"Sarah Drasner",avatarURL:"https://tylermcginnis.com/would-you-rather/sarah.jpg",tweets:["8xf0y6ziyjabvozdd253nd","hbsc73kzqi75rg7v1e0i6a","2mb6re13q842wu8n106bhk","6h5ims9iks66d4m7kqizmv","3sklxkf9yyfowrf0o1ftbb"]},tylermcginnis:{id:"tylermcginnis",name:"Tyler McGinnis",avatarURL:"https://tylermcginnis.com/would-you-rather/tyler.jpg",tweets:["5c9qojr2d1738zlx09afby","f4xzgapq7mu783k9t02ghx","nnvkjqoevs8t02lzcc0ky","4pt0px8l0l9g6y69ylivti","fap8sdxppna8oabnxljzcv","leqp4lzfox7cqvsgdj0e7","26p5pskqi88i58qmza2gid","xi3ca2jcfvpa0i3t4m7ag"]},dan_abramov:{id:"dan_abramov",name:"Dan Abramov",avatarURL:"https://tylermcginnis.com/would-you-rather/dan.jpg",tweets:["5w6k1n34dkp1x29cuzn2zn","czpa59mg577x1oo45cup0d","omdbjl68fxact38hk7ypy6","3km0v4hf1ps92ajf4z2ytg","njv20mq7jsxa6bgsqc97","sfljgka8pfddbcer8nuxv","r0xu2v1qrxa6ygtvf2rkjw"]}},E={"8xf0y6ziyjabvozdd253nd":{id:"8xf0y6ziyjabvozdd253nd",text:"Shoutout to all the speakers I know for whom English is not a first language, but can STILL explain a concept well. It's hard enough to give a good talk in your mother tongue!",author:"sarah_edo",timestamp:1518122597860,likes:["tylermcginnis"],replies:["fap8sdxppna8oabnxljzcv","3km0v4hf1ps92ajf4z2ytg"],replyingTo:null},"5c9qojr2d1738zlx09afby":{id:"5c9qojr2d1738zlx09afby",text:"I hope one day the propTypes pendulum swings back. Such a simple yet effective API. Was one of my favorite parts of React.",author:"tylermcginnis",timestamp:1518043995650,likes:["sarah_edo","dan_abramov"],replies:["njv20mq7jsxa6bgsqc97"],replyingTo:null},f4xzgapq7mu783k9t02ghx:{id:"f4xzgapq7mu783k9t02ghx",text:"Want to work at Facebook/Google/:BigCompany? Start contributing code long before you ever interview there.",author:"tylermcginnis",timestamp:1517043995650,likes:["dan_abramov"],replies:[],replyingTo:null},hbsc73kzqi75rg7v1e0i6a:{id:"hbsc73kzqi75rg7v1e0i6a",text:"Puppies 101: buy a hamper with a lid on it.",author:"sarah_edo",timestamp:1516043995650,likes:["tylermcginnis"],replies:["leqp4lzfox7cqvsgdj0e7","sfljgka8pfddbcer8nuxv"],replyingTo:null},"5w6k1n34dkp1x29cuzn2zn":{id:"5w6k1n34dkp1x29cuzn2zn",text:"Is there a metric like code coverage, but that shows lines that, if changed (in a syntactically correct way), wouldn\u2019t cause tests to fail?",author:"dan_abramov",timestamp:1515043995650,likes:["sarah_edo"],replies:[],replyingTo:null},czpa59mg577x1oo45cup0d:{id:"czpa59mg577x1oo45cup0d",text:"React came out 'rethinking best practices'. It has since accumulated 'best practices' of its own. Let\u2019s see if we can do better.",author:"dan_abramov",timestamp:1515043995650,likes:["tylermcginnis","sarah_edo"],replies:["3sklxkf9yyfowrf0o1ftbb"],replyingTo:null},"2mb6re13q842wu8n106bhk":{id:"2mb6re13q842wu8n106bhk",text:"I think I realized I like dogs so much because I can really relate to being motivated by snacks",author:"sarah_edo",timestamp:1514043995650,likes:["dan_abramov"],replies:["26p5pskqi88i58qmza2gid"],replyingTo:null},nnvkjqoevs8t02lzcc0ky:{id:"nnvkjqoevs8t02lzcc0ky",text:"Maybe the real benefit of open source was the friendships we made along the way?",author:"tylermcginnis",timestamp:1513043995650,likes:[],replies:[],replyingTo:null},omdbjl68fxact38hk7ypy6:{id:"omdbjl68fxact38hk7ypy6",text:"A 7-minute Paul Joseph Watson video being translated and aired by a Russian state TV channel is the most surreal thing I\u2019ve seen in 2018 yet",author:"dan_abramov",timestamp:1512043995650,likes:[],replies:[],replyingTo:null},"4pt0px8l0l9g6y69ylivti":{id:"4pt0px8l0l9g6y69ylivti",text:"Talking less about the downsides of OSS and focusing on some of the huge potential upsides for once might just help get more people into it.",author:"tylermcginnis",timestamp:1511043995650,likes:["dan_abramov"],replies:[],replyingTo:null},"6h5ims9iks66d4m7kqizmv":{id:"6h5ims9iks66d4m7kqizmv",text:"By the way, if you have a blog post sitting around and want to get some eyes on it, we take guest submissions! That's how I started.",author:"sarah_edo",timestamp:1510043995650,likes:["dan_abramov","tylermcginnis"],replies:["xi3ca2jcfvpa0i3t4m7ag","r0xu2v1qrxa6ygtvf2rkjw"],replyingTo:null},fap8sdxppna8oabnxljzcv:{id:"fap8sdxppna8oabnxljzcv",author:"tylermcginnis",text:"I agree. I'm always really impressed when I see someone giving a talk in a language that's not their own.",timestamp:1518122677860,likes:["sarah_edo"],replyingTo:"8xf0y6ziyjabvozdd253nd",replies:[]},"3km0v4hf1ps92ajf4z2ytg":{id:"3km0v4hf1ps92ajf4z2ytg",author:"dan_abramov",text:"It can be difficult at times.",timestamp:1518122667860,likes:[],replyingTo:"8xf0y6ziyjabvozdd253nd",replies:[]},njv20mq7jsxa6bgsqc97:{id:"njv20mq7jsxa6bgsqc97",author:"dan_abramov",text:"Sometimes you have to sacrifice simplicity for power.",timestamp:1518044095650,likes:["tylermcginnis"],replyingTo:"5c9qojr2d1738zlx09afby",replies:[]},leqp4lzfox7cqvsgdj0e7:{id:"leqp4lzfox7cqvsgdj0e7",author:"tylermcginnis",text:"Also trashcans. Learned this the hard way.",timestamp:1516043255650,likes:[],replyingTo:"hbsc73kzqi75rg7v1e0i6a",replies:[]},sfljgka8pfddbcer8nuxv:{id:"sfljgka8pfddbcer8nuxv",author:"dan_abramov",text:"Puppies are the best.",timestamp:1516045995650,likes:["sarah_edo","tylermcginnis"],replyingTo:"hbsc73kzqi75rg7v1e0i6a",replies:[]},"3sklxkf9yyfowrf0o1ftbb":{id:"3sklxkf9yyfowrf0o1ftbb",author:"sarah_edo",text:"The idea of best practices being a negative thing is an interesting concept.",timestamp:1515044095650,likes:["dan_abramov"],replyingTo:"czpa59mg577x1oo45cup0d",replies:[]},"26p5pskqi88i58qmza2gid":{id:"26p5pskqi88i58qmza2gid",author:"tylermcginnis",text:"Too relatable",timestamp:1514044994650,likes:["sarah_edo"],replyingTo:"2mb6re13q842wu8n106bhk",replies:[]},xi3ca2jcfvpa0i3t4m7ag:{id:"xi3ca2jcfvpa0i3t4m7ag",author:"tylermcginnis",text:"Just DMd you!",timestamp:1510043995650,likes:[],replyingTo:"6h5ims9iks66d4m7kqizmv",replies:[]},r0xu2v1qrxa6ygtvf2rkjw:{id:"r0xu2v1qrxa6ygtvf2rkjw",author:"dan_abramov",text:"This is a great idea.",timestamp:1510044395650,likes:["tylermcginnis"],replyingTo:"6h5ims9iks66d4m7kqizmv",replies:[]}};function L(e){var t=e.text,n=e.author,a=e.replyingTo;return new Promise((function(e,i){var r=function(e){var t=e.author,n=e.text,a=e.replyingTo,i=void 0===a?null:a;return{author:t,id:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),likes:[],replies:[],text:n,timestamp:Date.now(),replyingTo:i}}({text:t,author:n,replyingTo:a});setTimeout((function(){E=Object(m.a)(Object(m.a)({},E),{},Object(p.a)({},r.id,r)),_=Object(m.a)(Object(m.a)({},_),{},Object(p.a)({},n,Object(m.a)(Object(m.a)({},_[n]),{},{tweets:_[n].tweets.concat([r.id])}))),e(r)}),1e3)}))}function S(e){return function(e){var t=e.id,n=e.hasLiked,a=e.authedUser;return new Promise((function(e,i){setTimeout((function(){E=Object(m.a)(Object(m.a)({},E),{},Object(p.a)({},t,Object(m.a)(Object(m.a)({},E[t]),{},{likes:!0===n?E[t].likes.filter((function(e){return e!==a})):E[t].likes.concat([a])}))),e()}),500)}))}(e)}var I=function(e){return{type:"TOGGLE_TWEET",id:e.id,authedUser:e.authedUser,hasLiked:e.hasLiked}};function U(e){var t=new Date(e),n=t.toLocaleTimeString("en-US");return n.substr(0,5)+n.slice(-2)+" | "+t.toLocaleDateString()}var D=function(e){return null===e},C=function(e){return Object.keys(e).sort((function(t,n){return e[n].timestamp-e[t].timestamp}))},N=function(e,t){return t[e]},R=function(e,t,n,a){var i=N(t,n);return i&&function(e,t,n,a){var i=e.id,r=e.likes,s=e.replies,o=e.text,c=e.timestamp;return{name:t.name,id:i,timestamp:c,text:o,avatar:t.avatarURL,likes:r.length,replies:s.length,hasLiked:r.includes(n),parent:a?{author:a.author,id:a.id}:null}}(i,a[i.author],e,function(e,t){var n=N(e,t);return n&&t[n.replyingTo]}(t,n))},A=function(e,t){return t[e]&&t[e].replies.sort((function(e,n){return t[n].timestamp-t[e].timestamp}))},P=n(35),W=n(24),B=function(e){Object(O.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(k.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).handleLike=function(t){t.preventDefault();var n=e.props,a=n.authedUser,i=n.tweet;e.props.handleToggleTweet({id:i.id,authedUser:a,hasLiked:i.hasLiked})},e.toParent=function(t,n){t.preventDefault(),e.props.history.push("/tweet/".concat(n))},e}return Object(P.a)(n,[{key:"render",value:function(){var e=this,t=this.props.tweet;if(!t)return Object(a.jsx)("p",{children:"This tweet does not exist"});var n=t.id,i=t.name,r=t.avatar,s=t.timestamp,o=t.text,c=t.hasLiked,l=t.likes,u=t.replies,d=t.parent;return Object(a.jsxs)(T.b,{to:"/tweet/".concat(n),className:"tweet",children:[Object(a.jsx)("img",{src:r,alt:"Avatar of ".concat(i),className:"avatar"}),Object(a.jsxs)("div",{className:"tweet-info",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{children:i}),Object(a.jsx)("div",{children:U(s)}),d&&Object(a.jsxs)("button",{className:"replying-to",onClick:function(t){return e.toParent(t,d.id)},children:["Replying to @",d.author]}),Object(a.jsx)("p",{children:o})]}),Object(a.jsxs)("div",{className:"tweet-icons",children:[Object(a.jsx)(W.a,{className:"tweet-icon"})," ",0!==u&&Object(a.jsx)("span",{children:u}),Object(a.jsx)("button",{className:"heart-button",onClick:this.handleLike,children:c?Object(a.jsx)(W.b,{color:"#e0245e",className:"tweet-icon"}):Object(a.jsx)(W.c,{className:"tweet-icon"})}),0!==l&&Object(a.jsx)("span",{children:l})]})]})]})}}]),n}(i.Component),F=Object(z.f)(Object(o.connect)((function(e,t){var n=e.authedUser,a=e.tweets,i=e.users,r=t.id;return{authedUser:n,tweet:R(n,r,a,i)}}),{handleToggleTweet:function(e){return function(t){return t(I(e)),S(e).catch((function(n){t(I(e)),console.warn("Error in handleToggleTweet: ",n),alert("There was an error liking the tweet. Try again")}))}}})(B)),G=Object(o.connect)((function(e){var t=e.tweets;return{tweetIDs:C(t)}}))((function(e){var t=e.tweetIDs;return Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{className:"center",children:"Your Timeline"}),Object(a.jsx)("ul",{children:t.map((function(e){return Object(a.jsx)("li",{children:Object(a.jsx)(F,{id:e})},e)}))})]})})),H=function(e){var t=e.replies;return Object(a.jsx)("ul",{children:t.map((function(e){return Object(a.jsx)("li",{children:Object(a.jsx)(F,{id:e})},e)}))})},M=function(e){Object(O.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(k.a)(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={text:"",toHome:!1},e.handleChange=function(t){t.preventDefault(),e.setState((function(){return{text:t.target.value}}))},e.handleSubmit=function(t){t.preventDefault();var n=e.props,a=n.authedUser,i=n.id;e.props.handleAddTweet(a,e.state.text,i),e.setState((function(){return{text:"",toHome:!i}}))},e.tweetLeftColor=function(e){return e>=181?"green":e>=51?"blue":"red"},e.render=function(){var t=e.state,n=t.text,i=t.toHome,r=270-n.length;return i?Object(a.jsx)(z.a,{to:"/"}):Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{className:"center",children:" Compose new tweet"}),Object(a.jsxs)("form",{className:"new-tweet",onSubmit:e.handleSubmit,children:[Object(a.jsx)("textarea",{place:"What's happening?",value:n,onChange:e.handleChange,className:"textarea",maxLength:270}),r<=269&&Object(a.jsx)("div",{className:"tweet-length",style:{color:e.tweetLeftColor(r)},children:r}),Object(a.jsx)("button",{className:"btn",type:"submit",disabled:""===n,children:"Submit"})]})]})},e}return n}(i.Component),V=Object(o.connect)((function(e){return{authedUser:e.authedUser}}),{handleAddTweet:function(e,t,n){return function(a){return a(Object(u.showLoading)()),(i={text:t,author:e,replyingTo:n},L(i)).then((function(e){return a(function(e){return{type:"ADD_TWEET",tweet:e}}(e))})).then((function(){return a(Object(u.hideLoading)())})).catch((function(e){console.warn("Error in handleAddTweet: ",e),alert("There was an error adding the tweet. Try again")}));var i}}})(M),J=Object(o.connect)((function(e,t){var n=e.tweets,a=t.match;return{id:a.params.id,replies:A(a.params.id,n)}}))((function(e){var t=e.id,n=e.replies;return Object(a.jsxs)("div",{children:[Object(a.jsx)(F,{id:t}),Object(a.jsx)(V,{id:t}),n&&Object(a.jsx)(H,{replies:n})]})}));function Y(){return Object(a.jsx)("nav",{className:"nav",children:Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:Object(a.jsx)(T.c,{to:"/",exact:!0,activeClassName:"active",children:"Home"})}),Object(a.jsx)("li",{children:Object(a.jsx)(T.c,{to:"/new",activeClassName:"active",children:"New Tweet"})})]})})}var K=function(e){Object(O.a)(n,e);var t=Object(w.a)(n);function n(){var e;Object(k.a)(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).componentDidMount=function(){return e.props.handleInitialData()},e.render=function(){return Object(a.jsx)(T.a,{basename:"/chirper",children:Object(a.jsxs)(a.Fragment,{children:[console.log(e.props),Object(a.jsx)(d.a,{}),Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(Y,{}),!e.props.loading&&Object(a.jsxs)("div",{children:[Object(a.jsx)(z.b,{path:"/",exact:!0,component:G}),Object(a.jsx)(z.b,{path:"/tweet/:id",component:J}),Object(a.jsx)(z.b,{path:"/new",component:V})]})]})]})})},e}return n}(i.Component),Q=Object(o.connect)((function(e){var t=e.authedUser;return{loading:D(t)}}),{handleInitialData:function(){return function(e){return e(Object(u.showLoading)()),Promise.all([new Promise((function(e,t){setTimeout((function(){return e(Object(m.a)({},_))}),1e3)})),new Promise((function(e,t){setTimeout((function(){return e(Object(m.a)({},E))}),1e3)}))]).then((function(e){var t=Object(q.a)(e,2);return{users:t[0],tweets:t[1]}})).then((function(t){var n=t.tweets,a=t.users;e(function(e){return{type:"RECEIVE_TWEETS",tweets:e}}(n)),e(function(e){return{type:"RECEIVE_USERS",users:e}}(a)),e({type:"SET_AUTHED_USER",id:"tylermcginnis"}),e(Object(u.hideLoading)())}))}}})(K),X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),i(e),r(e),s(e)}))};s.a.render(Object(a.jsx)(o.Provider,{store:y,children:Object(a.jsx)(Q,{})}),document.getElementById("root")),X()}},[[51,1,2]]]);
//# sourceMappingURL=main.f55e0d49.chunk.js.map